<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Coding Agent - Diff Review</title>
    <link rel="stylesheet" href="styles/tokens.css" />
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/utilities.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/layouts.css" />
    <link rel="stylesheet" href="styles/themes.css" />
    <link rel="stylesheet" href="styles/print.css" />
  </head>
  <body class="theme--light">
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Global Shell -->
    <header class="shell__header">
      <div class="shell__header-content">
        <h1 class="shell__title">
          <span class="shell__icon">ü§ñ</span>
          Smart Coding Agent
        </h1>
        <div class="shell__controls">
          <div class="repo-selector">
            <span class="repo-selector__name">my-project</span>
            <span class="badge badge--branch">main</span>
          </div>
          <button class="btn btn--ghost" aria-label="Print diff">
            <span class="btn__icon">üñ®Ô∏è</span>
          </button>
        </div>
      </div>
    </header>

    <div class="shell__body">
      <nav class="shell__sidebar">
        <ul class="nav">
          <li class="nav__item">
            <a href="index.html" class="nav__link">
              <span class="nav__icon">üíª</span>
              Workspace
            </a>
          </li>
          <li class="nav__item">
            <a
              href="diff.html"
              class="nav__link nav__link--active"
              aria-current="page"
            >
              <span class="nav__icon">üìä</span>
              Diff Review
            </a>
          </li>
          <li class="nav__item">
            <a href="tests.html" class="nav__link">
              <span class="nav__icon">üß™</span>
              Tests
            </a>
          </li>
          <li class="nav__item">
            <a href="perf.html" class="nav__link">
              <span class="nav__icon">‚ö°</span>
              Performance
            </a>
          </li>
          <li class="nav__item">
            <a href="playbooks.html" class="nav__link">
              <span class="nav__icon">üìö</span>
              Playbooks
            </a>
          </li>
          <li class="nav__item">
            <a href="settings.html" class="nav__link">
              <span class="nav__icon">‚öôÔ∏è</span>
              Settings
            </a>
          </li>
          <li class="nav__item">
            <a href="about.html" class="nav__link">
              <span class="nav__icon">‚ÑπÔ∏è</span>
              About
            </a>
          </li>
        </ul>

        <div class="project-tree">
          <h3 class="project-tree__title">Changed Files</h3>
          <ul class="project-tree__list">
            <li class="project-tree__item">
              <span class="project-tree__icon">üìÑ</span>
              src/table.ts
              <div class="project-tree__stats">
                <span class="badge badge--added">+6</span>
                <span class="badge badge--removed">-2</span>
              </div>
            </li>
            <li class="project-tree__item">
              <span class="project-tree__icon">üìÑ</span>
              src/types.ts
              <div class="project-tree__stats">
                <span class="badge badge--added">+3</span>
                <span class="badge badge--removed">-0</span>
              </div>
            </li>
          </ul>
        </div>

        <div class="theme-toggle">
          <button class="btn btn--ghost" aria-label="Toggle theme">
            <span class="btn__icon">üåô</span>
          </button>
        </div>
      </nav>

      <main id="main-content" class="shell__main">
        <!-- Diff Review Page -->
        <div class="diff-review">
          <!-- Header -->
          <div class="diff-review__header">
            <div class="diff-review__title">
              <h1>Fix: Handle undefined rows in buildRows function</h1>
              <div class="diff-review__meta">
                <span class="badge badge--success">Low Risk</span>
                <span class="badge badge--info">6 lines changed</span>
                <span class="badge badge--secondary">2 files</span>
              </div>
            </div>
            <div class="diff-review__actions">
              <button class="btn btn--primary">Apply Patch</button>
              <button class="btn btn--secondary">Stage Subset</button>
              <button class="btn btn--ghost">Print Patch</button>
            </div>
          </div>

          <!-- Tabs -->
          <div class="diff-review__tabs">
            <div class="tabs">
              <button class="tabs__tab tabs__tab--active" data-tab="unified">
                Unified
              </button>
              <button class="tabs__tab" data-tab="split">Split</button>
            </div>
          </div>

          <!-- Diff Content -->
          <div class="diff-review__content">
            <!-- Unified View -->
            <div class="diff-view diff-view--unified" id="unified-view">
              <!-- File 1: src/table.ts -->
              <div class="diff-block">
                <div class="diff-block__header">
                  <span class="diff-block__filename">src/table.ts</span>
                  <div class="diff-block__stats">
                    <span class="badge badge--added">+4</span>
                    <span class="badge badge--removed">-2</span>
                  </div>
                </div>
                <div class="diff-block__content">
                  <div class="diff-line diff-line--context">
                    <span class="diff-line__gutter">85</span>
                    <span class="diff-line__content">
                      // Build rows for table display</span
                    >
                  </div>
                  <div class="diff-line diff-line--removed">
                    <span class="diff-line__gutter">-</span>
                    <span class="diff-line__content"
                      >export function buildRows(rows: Row[]) {</span
                    >
                  </div>
                  <div class="diff-line diff-line--added">
                    <span class="diff-line__gutter">+</span>
                    <span class="diff-line__content"
                      >export function buildRows(rows: Row[] = []) {</span
                    >
                  </div>
                  <div class="diff-line diff-line--context">
                    <span class="diff-line__gutter">86</span>
                    <span class="diff-line__content">
                      if (!rows.length) return [];</span
                    >
                  </div>
                  <div class="diff-line diff-line--removed">
                    <span class="diff-line__gutter">-</span>
                    <span class="diff-line__content">
                      return rows.map(r => toView(r));</span
                    >
                  </div>
                  <div class="diff-line diff-line--added">
                    <span class="diff-line__gutter">+</span>
                    <span class="diff-line__content">
                      return rows.filter(Boolean).map(r => toView(r));</span
                    >
                  </div>
                  <div class="diff-line diff-line--context">
                    <span class="diff-line__gutter">88</span>
                    <span class="diff-line__content"> }</span>
                  </div>
                </div>
              </div>

              <!-- File 2: src/types.ts -->
              <div class="diff-block">
                <div class="diff-block__header">
                  <span class="diff-block__filename">src/types.ts</span>
                  <div class="diff-block__stats">
                    <span class="badge badge--added">+3</span>
                    <span class="badge badge--removed">-0</span>
                  </div>
                </div>
                <div class="diff-block__content">
                  <div class="diff-line diff-line--context">
                    <span class="diff-line__gutter">12</span>
                    <span class="diff-line__content">
                      // Type definitions for table components</span
                    >
                  </div>
                  <div class="diff-line diff-line--added">
                    <span class="diff-line__gutter">+</span>
                    <span class="diff-line__content">
                      // Handle undefined/null rows gracefully</span
                    >
                  </div>
                  <div class="diff-line diff-line--added">
                    <span class="diff-line__gutter">+</span>
                    <span class="diff-line__content">
                      export type SafeRow = Row | null | undefined;</span
                    >
                  </div>
                  <div class="diff-line diff-line--added">
                    <span class="diff-line__gutter">+</span>
                    <span class="diff-line__content">
                      export type RowArray = SafeRow[];</span
                    >
                  </div>
                </div>
              </div>
            </div>

            <!-- Split View -->
            <div class="diff-view diff-view--split" id="split-view" hidden>
              <div class="diff-split">
                <div class="diff-split__side diff-split__side--left">
                  <div class="diff-split__header">
                    <span class="diff-split__label">Before</span>
                    <span class="diff-split__filename">src/table.ts</span>
                  </div>
                  <div class="diff-split__content">
                    <div class="code-block">
                      <div class="code-block__content">
                        <pre
                          class="code"
                        ><code><span class="code__line"><span class="code__line-number">85</span><span class="code__line-content">  // Build rows for table display</span></span>
<span class="code__line"><span class="code__line-number">86</span><span class="code__line-content">export function buildRows(rows: Row[]) {</span></span>
<span class="code__line"><span class="code__line-number">87</span><span class="code__line-content">    if (!rows.length) return [];</span></span>
<span class="code__line"><span class="code__line-number">88</span><span class="code__line-content">    return rows.map(r => toView(r));</span></span>
<span class="code__line"><span class="code__line-number">89</span><span class="code__line-content">  }</span></span></code></pre>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="diff-split__side diff-split__side--right">
                  <div class="diff-split__header">
                    <span class="diff-split__label">After</span>
                    <span class="diff-split__filename">src/table.ts</span>
                  </div>
                  <div class="diff-split__content">
                    <div class="code-block">
                      <div class="code-block__content">
                        <pre
                          class="code"
                        ><code><span class="code__line"><span class="code__line-number">85</span><span class="code__line-content">  // Build rows for table display</span></span>
<span class="code__line code__line--added"><span class="code__line-number">86</span><span class="code__line-content">export function buildRows(rows: Row[] = []) {</span></span>
<span class="code__line"><span class="code__line-number">87</span><span class="code__line-content">    if (!rows.length) return [];</span></span>
<span class="code__line code__line--added"><span class="code__line-number">88</span><span class="code__line-content">    return rows.filter(Boolean).map(r => toView(r));</span></span>
<span class="code__line"><span class="code__line-number">89</span><span class="code__line-content">  }</span></span></code></pre>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Risk Analysis -->
          <div class="diff-review__risks">
            <h2>Risk Analysis</h2>
            <div class="risk-analysis">
              <div class="risk-analysis__item">
                <div class="risk-analysis__header">
                  <span class="risk-badge risk-badge--low">Low Risk</span>
                  <span class="risk-analysis__title">API Change</span>
                </div>
                <p class="risk-analysis__description">
                  Adding default parameter is backward compatible. Existing
                  calls without arguments will now work.
                </p>
              </div>
              <div class="risk-analysis__item">
                <div class="risk-analysis__header">
                  <span class="risk-badge risk-badge--low">Low Risk</span>
                  <span class="risk-analysis__title">Behavior Change</span>
                </div>
                <p class="risk-analysis__description">
                  Filtering null/undefined values prevents runtime errors but
                  may change output for edge cases.
                </p>
              </div>
              <div class="risk-analysis__item">
                <div class="risk-analysis__header">
                  <span class="risk-badge risk-badge--low">Low Risk</span>
                  <span class="risk-analysis__title">Performance Impact</span>
                </div>
                <p class="risk-analysis__description">
                  Minimal performance impact. Filter operation is O(n) but
                  prevents crashes.
                </p>
              </div>
            </div>
          </div>

          <!-- Summary -->
          <div class="diff-review__summary">
            <h2>Summary</h2>
            <div class="summary">
              <div class="summary__item"><strong>Files Changed:</strong> 2</div>
              <div class="summary__item"><strong>Lines Added:</strong> 6</div>
              <div class="summary__item"><strong>Lines Removed:</strong> 2</div>
              <div class="summary__item"><strong>Risk Level:</strong> Low</div>
              <div class="summary__item">
                <strong>Estimated Time:</strong> 2 minutes
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Status Bar -->
    <footer class="shell__footer">
      <div class="status-bar">
        <div class="status-bar__left">
          <span class="status-bar__model">GPT-4</span>
          <span class="status-bar__tokens">~1.8k tokens</span>
        </div>
        <div class="status-bar__right">
          <span class="status-bar__latency">‚Äî</span>
          <span class="status-bar__git">main*</span>
        </div>
      </div>
    </footer>
  </body>
</html>
