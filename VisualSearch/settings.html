<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings - Visual Search</title>
    <meta
      name="description"
      content="Configure your visual search preferences"
    />

    <!-- CSS Files -->
    <link rel="stylesheet" href="styles/tokens.css" />
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/utilities.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/layouts.css" />
    <link rel="stylesheet" href="styles/themes.css" />
    <link rel="stylesheet" href="styles/print.css" />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîç</text></svg>"
    />
  </head>
  <body>
    <div class="shell">
      <!-- Header -->
      <header class="shell__header">
        <div class="container">
          <div class="header">
            <a href="index.html" class="header__brand">
              <svg
                class="header__brand-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
              </svg>
              Visual Search
            </a>

            <nav class="header__nav">
              <a href="index.html" class="btn btn--ghost btn--sm">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                  ></path>
                  <polyline points="9,22 9,12 15,12 15,22"></polyline>
                </svg>
                Home
              </a>

              <button
                class="theme-toggle"
                onclick="toggleTheme()"
                aria-label="Toggle theme"
              >
                <svg
                  class="theme-toggle__icon"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="5"></circle>
                  <line x1="12" y1="1" x2="12" y2="3"></line>
                  <line x1="12" y1="21" x2="12" y2="23"></line>
                  <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                  <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                  <line x1="1" y1="12" x2="3" y2="12"></line>
                  <line x1="21" y1="12" x2="23" y2="12"></line>
                  <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                  <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                Light
              </button>

              <a href="collections.html" class="btn btn--ghost btn--sm">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"
                  ></path>
                </svg>
                Collections
              </a>
            </nav>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="shell__main">
        <div class="container">
          <!-- Page Header -->
          <div class="mb-8">
            <h1 class="text-2xl font-bold mb-2">Settings</h1>
            <p class="text-muted">
              Configure your visual search preferences and privacy settings
            </p>
          </div>

          <!-- Settings Sections -->
          <div class="grid gap-6">
            <!-- Region & Currency -->
            <div class="card">
              <div class="card__header">
                <h2>Region & Currency</h2>
              </div>
              <div class="card__body">
                <div class="grid grid--2 gap-4">
                  <div>
                    <label for="region" class="block text-sm font-medium mb-2"
                      >Region</label
                    >
                    <select
                      id="region"
                      class="w-full p-3 border border-gray-300 rounded-md"
                    >
                      <option value="IN" selected>India</option>
                      <option value="US">United States</option>
                      <option value="EU">Europe</option>
                      <option value="UK">United Kingdom</option>
                      <option value="AU">Australia</option>
                    </select>
                  </div>

                  <div>
                    <label for="currency" class="block text-sm font-medium mb-2"
                      >Currency</label
                    >
                    <select
                      id="currency"
                      class="w-full p-3 border border-gray-300 rounded-md"
                    >
                      <option value="INR" selected>‚Çπ Indian Rupee</option>
                      <option value="USD">$ US Dollar</option>
                      <option value="EUR">‚Ç¨ Euro</option>
                      <option value="GBP">¬£ British Pound</option>
                      <option value="AUD">A$ Australian Dollar</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Units -->
            <div class="card">
              <div class="card__header">
                <h2>Units</h2>
              </div>
              <div class="card__body">
                <div class="grid grid--2 gap-4">
                  <div>
                    <label
                      for="length-unit"
                      class="block text-sm font-medium mb-2"
                      >Length</label
                    >
                    <select
                      id="length-unit"
                      class="w-full p-3 border border-gray-300 rounded-md"
                    >
                      <option value="cm" selected>Centimeters (cm)</option>
                      <option value="in">Inches (in)</option>
                    </select>
                  </div>

                  <div>
                    <label
                      for="weight-unit"
                      class="block text-sm font-medium mb-2"
                      >Weight</label
                    >
                    <select
                      id="weight-unit"
                      class="w-full p-3 border border-gray-300 rounded-md"
                    >
                      <option value="kg" selected>Kilograms (kg)</option>
                      <option value="lb">Pounds (lb)</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Theme Settings -->
            <div class="card">
              <div class="card__header">
                <h2>Appearance</h2>
              </div>
              <div class="card__body">
                <div class="grid gap-4">
                  <div>
                    <label class="block text-sm font-medium mb-2">Theme</label>
                    <div class="flex gap-3">
                      <button
                        class="btn btn--secondary"
                        onclick="setTheme('light')"
                        id="theme-light"
                      >
                        <svg
                          width="16"
                          height="16"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <circle cx="12" cy="12" r="5"></circle>
                          <line x1="12" y1="1" x2="12" y2="3"></line>
                          <line x1="12" y1="21" x2="12" y2="23"></line>
                          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                          <line
                            x1="18.36"
                            y1="18.36"
                            x2="19.78"
                            y2="19.78"
                          ></line>
                          <line x1="1" y1="12" x2="3" y2="12"></line>
                          <line x1="21" y1="12" x2="23" y2="12"></line>
                          <line
                            x1="4.22"
                            y1="19.78"
                            x2="5.64"
                            y2="18.36"
                          ></line>
                          <line
                            x1="18.36"
                            y1="5.64"
                            x2="19.78"
                            y2="4.22"
                          ></line>
                        </svg>
                        Light
                      </button>

                      <button
                        class="btn btn--ghost"
                        onclick="setTheme('dark')"
                        id="theme-dark"
                      >
                        <svg
                          width="16"
                          height="16"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <path
                            d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
                          ></path>
                        </svg>
                        Dark
                      </button>

                      <button
                        class="btn btn--ghost"
                        onclick="setTheme('high-contrast')"
                        id="theme-high-contrast"
                      >
                        <svg
                          width="16"
                          height="16"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <circle cx="12" cy="12" r="3"></circle>
                          <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
                        </svg>
                        High Contrast
                      </button>
                    </div>
                  </div>

                  <div>
                    <label class="flex items-center gap-3">
                      <input
                        type="checkbox"
                        id="reduced-motion"
                        class="w-4 h-4"
                      />
                      <span class="text-sm"
                        >Reduce motion for accessibility</span
                      >
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Search Settings -->
            <div class="card">
              <div class="card__header">
                <h2>Search Preferences</h2>
              </div>
              <div class="card__body">
                <div class="grid gap-4">
                  <div>
                    <label class="flex items-center gap-3">
                      <input
                        type="checkbox"
                        id="safe-search"
                        class="w-4 h-4"
                        checked
                      />
                      <span class="text-sm"
                        >Enable safe search (hide restricted content)</span
                      >
                    </label>
                  </div>

                  <div>
                    <label class="flex items-center gap-3">
                      <input
                        type="checkbox"
                        id="auto-detect"
                        class="w-4 h-4"
                        checked
                      />
                      <span class="text-sm">Auto-detect objects in images</span>
                    </label>
                  </div>

                  <div>
                    <label class="flex items-center gap-3">
                      <input
                        type="checkbox"
                        id="show-confidence"
                        class="w-4 h-4"
                        checked
                      />
                      <span class="text-sm">Show confidence scores</span>
                    </label>
                  </div>

                  <div>
                    <label
                      for="default-mode"
                      class="block text-sm font-medium mb-2"
                      >Default search mode</label
                    >
                    <select
                      id="default-mode"
                      class="w-full p-3 border border-gray-300 rounded-md"
                    >
                      <option value="shop" selected>Shop</option>
                      <option value="learn">Learn</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Privacy Settings -->
            <div class="card">
              <div class="card__header">
                <h2>Privacy & Data</h2>
              </div>
              <div class="card__body">
                <div class="grid gap-4">
                  <div>
                    <label class="flex items-center gap-3">
                      <input
                        type="checkbox"
                        id="retain-images"
                        class="w-4 h-4"
                      />
                      <span class="text-sm"
                        >Retain uploaded images for improvement (not
                        recommended)</span
                      >
                    </label>
                  </div>

                  <div>
                    <label class="flex items-center gap-3">
                      <input
                        type="checkbox"
                        id="face-blur"
                        class="w-4 h-4"
                        checked
                      />
                      <span class="text-sm"
                        >Auto-blur faces in images (when implemented)</span
                      >
                    </label>
                  </div>

                  <div>
                    <label class="flex items-center gap-3">
                      <input type="checkbox" id="analytics" class="w-4 h-4" />
                      <span class="text-sm"
                        >Share anonymous usage analytics</span
                      >
                    </label>
                  </div>

                  <div class="alert alert--privacy">
                    <strong>Privacy Note:</strong> In this prototype, no images
                    are stored or transmitted. All processing is simulated.
                  </div>
                </div>
              </div>
            </div>

            <!-- Advanced Settings -->
            <div class="card">
              <div class="card__header">
                <h2>Advanced</h2>
              </div>
              <div class="card__body">
                <div class="grid gap-4">
                  <div>
                    <label
                      for="similarity-threshold"
                      class="block text-sm font-medium mb-2"
                      >Minimum similarity threshold</label
                    >
                    <input
                      type="range"
                      id="similarity-threshold"
                      min="50"
                      max="95"
                      value="70"
                      class="w-full"
                    />
                    <div class="flex justify-between text-xs text-muted mt-1">
                      <span>50%</span>
                      <span id="threshold-value">70%</span>
                      <span>95%</span>
                    </div>
                  </div>

                  <div>
                    <label
                      for="max-results"
                      class="block text-sm font-medium mb-2"
                      >Maximum results per search</label
                    >
                    <select
                      id="max-results"
                      class="w-full p-3 border border-gray-300 rounded-md"
                    >
                      <option value="12" selected>12 results</option>
                      <option value="24">24 results</option>
                      <option value="48">48 results</option>
                      <option value="96">96 results</option>
                    </select>
                  </div>

                  <div>
                    <label
                      for="cache-duration"
                      class="block text-sm font-medium mb-2"
                      >Search cache duration</label
                    >
                    <select
                      id="cache-duration"
                      class="w-full p-3 border border-gray-300 rounded-md"
                    >
                      <option value="1">1 hour</option>
                      <option value="6">6 hours</option>
                      <option value="24" selected>24 hours</option>
                      <option value="168">1 week</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Reset & Export -->
            <div class="card">
              <div class="card__header">
                <h2>Data Management</h2>
              </div>
              <div class="card__body">
                <div class="grid grid--2 gap-4">
                  <div>
                    <button
                      class="btn btn--secondary w-full"
                      onclick="exportSettings()"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path
                          d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5"
                        ></path>
                        <polyline points="7,10 12,15 17,10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                      </svg>
                      Export Settings
                    </button>
                  </div>

                  <div>
                    <button
                      class="btn btn--secondary w-full"
                      onclick="importSettings()"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <path
                          d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5"
                        ></path>
                        <polyline points="17,8 12,3 7,8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                      </svg>
                      Import Settings
                    </button>
                  </div>

                  <div>
                    <button
                      class="btn btn--secondary w-full"
                      onclick="resetToDefaults()"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <polyline points="1,4 1,10 7,10"></polyline>
                        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                      </svg>
                      Reset to Defaults
                    </button>
                  </div>

                  <div>
                    <button
                      class="btn btn--danger w-full"
                      onclick="clearAllData()"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <polyline points="3,6 5,6 21,6"></polyline>
                        <path
                          d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"
                        ></path>
                      </svg>
                      Clear All Data
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Save Button -->
          <div class="text-center mt-8">
            <button class="btn btn--primary btn--lg" onclick="saveSettings()">
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
                ></path>
                <polyline points="17,21 17,13 7,13 7,21"></polyline>
                <polyline points="7,3 7,8 15,8"></polyline>
              </svg>
              Save Settings
            </button>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="shell__footer">
        <div class="container">
          <div class="flex flex--between items-center">
            <div class="text-sm text-muted">
              Visual Search v0.1 ‚Ä¢ <a href="about.html">About</a> ‚Ä¢
              <a href="about.html#privacy">Privacy</a>
            </div>
            <div class="text-sm text-muted">
              <a href="#" onclick="window.print()" class="header__print-link"
                >Print Settings</a
              >
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- JavaScript -->
    <script>
      function setTheme(theme) {
        document.body.setAttribute("data-theme", theme);
        localStorage.setItem("theme", theme);

        // Update theme buttons
        document.querySelectorAll('[id^="theme-"]').forEach((btn) => {
          btn.classList.remove("btn--secondary");
          btn.classList.add("btn--ghost");
        });

        document
          .getElementById(`theme-${theme}`)
          .classList.remove("btn--ghost");
        document
          .getElementById(`theme-${theme}`)
          .classList.add("btn--secondary");
      }

      function toggleTheme() {
        const currentTheme =
          document.body.getAttribute("data-theme") || "light";
        const newTheme = currentTheme === "light" ? "dark" : "light";
        setTheme(newTheme);
      }

      function exportSettings() {
        const settings = {
          region: document.getElementById("region").value,
          currency: document.getElementById("currency").value,
          lengthUnit: document.getElementById("length-unit").value,
          weightUnit: document.getElementById("weight-unit").value,
          theme: document.body.getAttribute("data-theme") || "light",
          safeSearch: document.getElementById("safe-search").checked,
          autoDetect: document.getElementById("auto-detect").checked,
          showConfidence: document.getElementById("show-confidence").checked,
          defaultMode: document.getElementById("default-mode").value,
          similarityThreshold: document.getElementById("similarity-threshold")
            .value,
          maxResults: document.getElementById("max-results").value,
          cacheDuration: document.getElementById("cache-duration").value,
        };

        const blob = new Blob([JSON.stringify(settings, null, 2)], {
          type: "application/json",
        });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "visual-search-settings.json";
        a.click();
        URL.revokeObjectURL(url);
      }

      function importSettings() {
        const input = document.createElement("input");
        input.type = "file";
        input.accept = ".json";
        input.onchange = function (e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              try {
                const settings = JSON.parse(e.target.result);
                loadSettings(settings);
                alert("Settings imported successfully!");
              } catch (error) {
                alert("Error importing settings: Invalid file format");
              }
            };
            reader.readAsText(file);
          }
        };
        input.click();
      }

      function loadSettings(settings) {
        if (settings.region)
          document.getElementById("region").value = settings.region;
        if (settings.currency)
          document.getElementById("currency").value = settings.currency;
        if (settings.lengthUnit)
          document.getElementById("length-unit").value = settings.lengthUnit;
        if (settings.weightUnit)
          document.getElementById("weight-unit").value = settings.weightUnit;
        if (settings.theme) setTheme(settings.theme);
        if (settings.safeSearch !== undefined)
          document.getElementById("safe-search").checked = settings.safeSearch;
        if (settings.autoDetect !== undefined)
          document.getElementById("auto-detect").checked = settings.autoDetect;
        if (settings.showConfidence !== undefined)
          document.getElementById("show-confidence").checked =
            settings.showConfidence;
        if (settings.defaultMode)
          document.getElementById("default-mode").value = settings.defaultMode;
        if (settings.similarityThreshold) {
          document.getElementById("similarity-threshold").value =
            settings.similarityThreshold;
          updateThresholdValue();
        }
        if (settings.maxResults)
          document.getElementById("max-results").value = settings.maxResults;
        if (settings.cacheDuration)
          document.getElementById("cache-duration").value =
            settings.cacheDuration;
      }

      function resetToDefaults() {
        if (confirm("Reset all settings to defaults?")) {
          document.getElementById("region").value = "IN";
          document.getElementById("currency").value = "INR";
          document.getElementById("length-unit").value = "cm";
          document.getElementById("weight-unit").value = "kg";
          setTheme("light");
          document.getElementById("safe-search").checked = true;
          document.getElementById("auto-detect").checked = true;
          document.getElementById("show-confidence").checked = true;
          document.getElementById("default-mode").value = "shop";
          document.getElementById("similarity-threshold").value = 70;
          updateThresholdValue();
          document.getElementById("max-results").value = "12";
          document.getElementById("cache-duration").value = "24";
          document.getElementById("retain-images").checked = false;
          document.getElementById("face-blur").checked = true;
          document.getElementById("analytics").checked = false;
          document.getElementById("reduced-motion").checked = false;

          alert("Settings reset to defaults!");
        }
      }

      function clearAllData() {
        if (
          confirm(
            "Clear all data including collections and search history? This cannot be undone."
          )
        ) {
          localStorage.clear();
          alert("All data cleared!");
        }
      }

      function saveSettings() {
        // In a real app, this would save to a backend
        const settings = {
          region: document.getElementById("region").value,
          currency: document.getElementById("currency").value,
          lengthUnit: document.getElementById("length-unit").value,
          weightUnit: document.getElementById("weight-unit").value,
          theme: document.body.getAttribute("data-theme") || "light",
          safeSearch: document.getElementById("safe-search").checked,
          autoDetect: document.getElementById("auto-detect").checked,
          showConfidence: document.getElementById("show-confidence").checked,
          defaultMode: document.getElementById("default-mode").value,
          similarityThreshold: document.getElementById("similarity-threshold")
            .value,
          maxResults: document.getElementById("max-results").value,
          cacheDuration: document.getElementById("cache-duration").value,
          retainImages: document.getElementById("retain-images").checked,
          faceBlur: document.getElementById("face-blur").checked,
          analytics: document.getElementById("analytics").checked,
          reducedMotion: document.getElementById("reduced-motion").checked,
        };

        localStorage.setItem("visualSearchSettings", JSON.stringify(settings));
        alert("Settings saved successfully!");
      }

      function updateThresholdValue() {
        const value = document.getElementById("similarity-threshold").value;
        document.getElementById("threshold-value").textContent = value + "%";
      }

      // Load saved settings on page load
      document.addEventListener("DOMContentLoaded", function () {
        const savedSettings = localStorage.getItem("visualSearchSettings");
        if (savedSettings) {
          try {
            const settings = JSON.parse(savedSettings);
            loadSettings(settings);
          } catch (error) {
            console.error("Error loading settings:", error);
          }
        }

        // Load saved theme
        const savedTheme = localStorage.getItem("theme") || "light";
        setTheme(savedTheme);

        // Update threshold value
        updateThresholdValue();

        // Add event listener for threshold slider
        document
          .getElementById("similarity-threshold")
          .addEventListener("input", updateThresholdValue);
      });
    </script>
  </body>
</html>
